# راهنمای کامل احراز هویت

## سیستم احراز هویت بهبود یافته

ربات حالا دارای سیستم احراز هویت پیشرفته است که از همه انواع اکانت‌ها پشتیبانی می‌کند.

## 🔐 دستورات احراز هویت

### 1. ارسال شماره تلفن
```
+989123456789
```

### 2. ارسال کد تایید
```
/code 12345
```

### 3. ارسال رمز عبور 2FA (در صورت نیاز)
```
/password mypassword123
```

## 📱 جریان احراز هویت

### مرحله 1: ارسال شماره تلفن
```
ورودی: +989123456789

خروجی:
📱 تایید شماره تلفن

شماره تلفن: +989123456789

✅ شماره تلفن دریافت شد.
🔐 کد ورود به اکانت را بفرستید.

فرمت: /code کد_ورود
مثال: /code 12345

⏰ زمان باقی‌مانده: 5 دقیقه

نکات مهم:
• کد را سریع‌تر ارسال کنید
• اگر 2FA دارید، ابتدا آن را غیرفعال کنید
• کد فقط یک بار قابل استفاده است
```

### مرحله 2: ارسال کد تایید
```
ورودی: /code 12345

خروجی (موفق):
✅ اکانت با موفقیت تایید و اضافه شد!

📱 شماره تلفن: +989123456789
🔐 کد تایید: 12345
📊 وضعیت: فعال
🔗 Session: ذخیره شده

🎉 اکانت آماده استفاده است!

دستورات بعدی:
/acc - نمایش لیست اکانت‌ها
/join 25 - جوین شدن 25 اکانت به گروه فعلی
/joinall @group - جوین شدن همه اکانت‌ها
/ping - بررسی وضعیت ربات
```

### مرحله 3: ارسال رمز عبور 2FA (در صورت نیاز)
```
ورودی: /password mypassword123

خروجی (موفق):
✅ اکانت با موفقیت تایید شد!

📱 شماره تلفن: +989123456789
🔐 رمز عبور: تایید شد
📊 وضعیت: فعال
🔗 Session: ذخیره شده

🎉 اکانت آماده استفاده است!

دستورات بعدی:
/acc - نمایش لیست اکانت‌ها
/join 25 - جوین شدن 25 اکانت به گروه فعلی
/ping - بررسی وضعیت ربات
```

## 🛡️ مدیریت خطاها

### خطای کد اشتباه
```
❌ تایید ناموفق

🔍 مشکلات احتمالی:
• کد ورود اشتباه است
• کد منقضی شده است
• اکانت 2FA دارد (نیاز به رمز عبور)
• خطا در اتصال

راه حل‌ها:
1. کد جدید را از تلگرام دریافت کنید
2. کد را سریع‌تر ارسال کنید
3. اگر 2FA دارید، ابتدا آن را غیرفعال کنید
4. دوباره تلاش کنید

دستور جدید:
/code کد_جدید
```

### خطای کد منقضی شده
```
❌ زمان تایید منقضی شده است. دوباره شماره تلفن را ارسال کنید.
```

### خطای رمز عبور 2FA اشتباه
```
❌ تایید ناموفق

🔍 مشکلات احتمالی:
• رمز عبور اشتباه است
• اکانت مشکل دارد
• خطا در اتصال

راه حل‌ها:
1. رمز عبور را دوباره بررسی کنید
2. اطمینان حاصل کنید که 2FA فعال است
3. دوباره تلاش کنید

دستور جدید:
/password رمز_عبور_جدید
```

## 🎯 سناریوهای مختلف

### سناریو 1: اکانت بدون 2FA
```
1. +989123456789
2. /code 12345
3. ✅ اکانت تایید شد
```

### سناریو 2: اکانت با 2FA
```
1. +989123456789
2. /code 12345
3. /password mypassword123
4. ✅ اکانت تایید شد
```

### سناریو 3: کد اشتباه
```
1. +989123456789
2. /code 99999
3. ❌ کد اشتباه
4. /code 12345 (کد جدید)
5. ✅ اکانت تایید شد
```

### سناریو 4: کد منقضی شده
```
1. +989123456789
2. انتظار 5 دقیقه
3. /code 12345
4. ❌ کد منقضی شده
5. +989123456789 (شروع مجدد)
6. /code 12345
7. ✅ اکانت تایید شد
```

## ⚙️ ویژگی‌های سیستم

### 🔐 امنیت
- **تایید دو مرحله‌ای:** شماره تلفن + کد تایید
- **پشتیبانی از 2FA:** رمز عبور اضافی
- **محدودیت زمانی:** 5 دقیقه برای تایید
- **بررسی دسترسی:** فقط ادمین‌ها

### 💾 ذخیره‌سازی
- **Session ذخیره می‌شود:** برای استفاده مجدد
- **اطلاعات اکانت:** در فایل JSON
- **وضعیت فعال:** اکانت آماده استفاده

### 📊 گزارش‌دهی
- **لاگ کامل:** همه عملیات ثبت می‌شوند
- **پیام‌های واضح:** راهنمای کامل
- **مدیریت خطا:** راه‌حل‌های مناسب

## 🚀 نحوه استفاده

### مرحله 1: راه‌اندازی
1. ربات را در تلگرام پیدا کنید
2. `/start` را ارسال کنید
3. ربات آماده دریافت دستورات است

### مرحله 2: احراز هویت
1. شماره تلفن را ارسال کنید: `+989123456789`
2. کد تایید را ارسال کنید: `/code 12345`
3. در صورت نیاز، رمز عبور 2FA: `/password mypass`

### مرحله 3: استفاده
1. `/acc` - مشاهده اکانت‌های تایید شده
2. `/join 25` - جوین شدن 25 اکانت به گروه
3. `/ping` - بررسی وضعیت ربات

## 🔧 تنظیمات

### محدودیت زمانی
- **زمان تایید:** 5 دقیقه
- **قابل تنظیم:** در کد ربات

### حداکثر اکانت
- **محدودیت:** 50 اکانت
- **قابل تنظیم:** در config.py

### لاگ‌گیری
- **سطح لاگ:** INFO
- **فایل لاگ:** bot.log
- **چرخش:** 10 MB

## 📋 چک‌لیست احراز هویت

### قبل از شروع
- [ ] ربات در تلگرام موجود است
- [ ] دسترسی ادمین دارید
- [ ] شماره تلفن معتبر دارید
- [ ] کد تایید آماده است

### مراحل احراز هویت
- [ ] شماره تلفن ارسال شد
- [ ] کد تایید ارسال شد
- [ ] رمز عبور 2FA ارسال شد (در صورت نیاز)
- [ ] اکانت تایید شد

### بعد از تایید
- [ ] اکانت در لیست موجود است
- [ ] وضعیت فعال است
- [ ] session ذخیره شده است
- [ ] آماده استفاده است

## 🎉 خلاصه

### ✅ مزایای سیستم جدید
- **امنیت بالا:** تایید دو مرحله‌ای
- **پشتیبانی کامل:** از همه انواع اکانت‌ها
- **مدیریت خطا:** راه‌حل‌های مناسب
- **ذخیره‌سازی:** session برای استفاده مجدد

### 🚀 نحوه شروع
1. **شماره تلفن:** `+989123456789`
2. **کد تایید:** `/code 12345`
3. **رمز عبور 2FA:** `/password mypass` (در صورت نیاز)
4. **استفاده:** `/acc`, `/join`, `/ping`

### 🔐 امنیت
- فقط ادمین‌ها می‌توانند استفاده کنند
- محدودیت زمانی 5 دقیقه
- پشتیبانی از 2FA
- لاگ کامل عملیات

**سیستم احراز هویت آماده استفاده است! 🔐**
